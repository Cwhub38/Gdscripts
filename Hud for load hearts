extends CanvasLayer

var coins = 0
var hud

func ready():
	$Coins.text = String(coins)
	load_hearts()
	Global.hud = self


func load_hearts():
	$HeartsFull.rect_size.x = Global.lives * 53




func _on_coin_collected():
	coins = coins + 1
	_ready()

my global
extends Node

var max_lives = 33
var lives = max_lives
var hud

func lose_life():
	lives -= 1
	hud.load_hearts()
	if lives <= 0:
		get_tree().change_scene("res://GameOver.tscn")




where do i add Global.lose_life()

player functions 


func ouch():
	set_modulate(Color(1,0.3,0.3,0.3))
	take_damage(1)


func take_damage(damage):
	hp -= damage
	hp -= 1
	$hp.text = str(hp)
	if hp <= 0:
		$gameover.play()


func shoot_laser():
	if Input.is_action_just_pressed("shoot"):
		var direction = 1 if not $Sprite.flip_h else -1
		var f = Player_Laser.instance()
		f.direction = direction
		get_parent().add_child(f)
		f.position.y = position. y + -10
		f.position.x = position. x + 25 * direction 

func is_on_floor():
	velocity = move_and_slide(velocity,Vector2.UP)

func move_and_fall():
	velocity = move_and_slide(velocity,Vector2.UP)
	velocity.y = velocity.y + GRAVITY

func add_coin():
	coins = coins + 1

func _on_Timer_timeout():
	set_modulate(Color(1,1,1,1))
	take_damage(1)



func _on_player_body_entered(body):
	if body.is_in_group("enemies"):
		ouch()
		set_modulate(Color(0.3,0.3,0.3,0.3))
		trauma()
		Global.lose_hearts()
		Global.lives -= 1


func _on_player_area_entered(area):
	if area.is_in_group("enemies"):
		trauma()
		print("hi")
		

func trauma():
	$AnimationPlayer.play("camshake")


func _on_gameover_finished():
	get_tree().change_scene("res://GameOver.tscn")
